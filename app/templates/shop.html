{% load static %}
{% include "header.html" %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Shop</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
    <!-- Add your additional CSS links here -->
</head>


 <!-- Add this to your HTML -->




{% block title %}Products{% endblock %}


  <h1>All Products</h1>

  <div class="row">
    {% for product in products %}
      <div class="col-md-4">
        <div class="card mb-4 box-shadow">
          <img class="card-img-top" src="{{ product.image.url }}" alt="{{ product.name }}">
          <div class="card-body">
            <h3>{{ product.name }}</h3>
            <p class="card-text">{{ product.description }}</p>
            <p class="card-text">${{ product.price }}</p>
            <a href="{% url 'add_to_cart' product.id %}" class="btn btn-primary">Add to Cart</a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>



  <script>
    function addToCart(productName, productPrice) {
      // Retrieve existing cart items from localStorage
      let cartItems = JSON.parse(localStorage.getItem('cart_items')) || [];

      // Check if the product is already in the cart
      let existingItem = cartItems.find(item => item.name === productName);

      if (existingItem) {
        // Increment the quantity if the product is already in the cart
        existingItem.quantity++;
      } else {
        // Add a new item to the cart if the product is not in the cart
        let newItem = {
          name: productName,
          price: productPrice,
          quantity: 1,
        };
        cartItems.push(newItem);
      }

      // Save the updated cart items back to localStorage
      localStorage.setItem('cart_items', JSON.stringify(cartItems));

      // Redirect to the cart page
      window.location.href = '/cart/';
    }
  </script>



{% include "footer.html" %}
